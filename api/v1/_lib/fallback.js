// CLAUDE-GENERATED: フォールバック提案データ
// Gemini APIが利用できない場合の代替提案

const fallbackSuggestions = {
  workplace: {
    5: [
      {
        id: 'fallback-wp-5-1',
        title: '深呼吸で気持ちをリセット',
        description: '4-7-8呼吸法で心を落ち着かせます',
        duration: 5,
        category: '認知的',
        steps: [
          '椅子に座り、背筋を伸ばす',
          '鼻から4秒かけて息を吸う',
          '7秒間息を止める',
          '口から8秒かけて息を吐く',
          'これを3-4回繰り返す'
        ]
      },
      {
        id: 'fallback-wp-5-2',
        title: 'デスク周りの軽いストレッチ',
        description: '座ったままできる簡単ストレッチ',
        duration: 5,
        category: '行動的',
        steps: [
          '肩を上げて3秒キープ、ゆっくり下ろす',
          '首を左右にゆっくり回す',
          '手首をくるくる回す',
          '足首を回して血行促進',
          '最後に背伸びをする'
        ]
      },
      {
        id: 'fallback-wp-5-3',
        title: '感謝のメンタルリスト',
        description: '今日の良かったことを3つ思い出す',
        duration: 5,
        category: '認知的',
        steps: [
          '目を閉じて今日を振り返る',
          '小さくても良かったことを1つ思い出す',
          '2つ目の良かったことを見つける',
          '3つ目を探してみる',
          'それぞれに感謝の気持ちを感じる'
        ]
      },
      {
        id: 'fallback-wp-5-4',
        title: '5分間の瞑想',
        description: '心を静めてリラックス',
        duration: 5,
        category: '認知的',
        steps: [
          '姿勢を正して座る',
          '目を閉じて呼吸に集中',
          '雑念が浮かんでも気にしない',
          '呼吸の音に意識を向ける',
          'ゆっくりと目を開ける'
        ]
      },
      {
        id: 'fallback-wp-5-5',
        title: '机の整理整頓',
        description: 'デスクを片付けて気分すっきり',
        duration: 5,
        category: '行動的',
        steps: [
          '不要な書類を捨てる',
          '文房具を整理する',
          '画面を清拭する',
          '引き出しを整理する',
          '清潔なデスクを眺める'
        ]
      },
      {
        id: 'fallback-wp-5-6',
        title: '好きな写真を見る',
        description: '心温まる写真で気分転換',
        duration: 5,
        category: '認知的',
        steps: [
          'スマホの写真フォルダを開く',
          '家族やペットの写真を見る',
          '楽しい思い出を思い出す',
          '写真の中の人に感謝する',
          '笑顔になる'
        ]
      },
      {
        id: 'fallback-wp-5-7',
        title: 'コーヒーブレイク',
        description: '温かい飲み物でリフレッシュ',
        duration: 5,
        category: '行動的',
        steps: [
          '席を立ってコーヒーを入れに行く',
          '香りを楽しみながら抽出',
          'ゆっくりと最初の一口を味わう',
          '窓の外を眺めながら飲む',
          '温かさを感じて席に戻る'
        ]
      },
      {
        id: 'fallback-wp-5-8',
        title: '「大丈夫」と自分に言う',
        description: '自己肯定の言葉かけ',
        duration: 5,
        category: '認知的',
        steps: [
          '深呼吸を一回する',
          '「私は大丈夫」と心の中で言う',
          '「今までも乗り越えてきた」と思い出す',
          '「これも乗り越えられる」と確信する',
          '肩の力を抜いてリラックス'
        ]
      },
      {
        id: 'fallback-wp-5-9',
        title: '目の体操',
        description: 'PC疲れの目をリフレッシュ',
        duration: 5,
        category: '行動的',
        steps: [
          '画面から目を離す',
          '遠くの景色を10秒見る',
          '目を時計回りに5回回す',
          '反時計回りに5回回す',
          '目を閉じて30秒休める'
        ]
      },
      {
        id: 'fallback-wp-5-10',
        title: '名言を読む',
        description: '偉人の言葉で勇気をもらう',
        duration: 5,
        category: '認知的',
        steps: [
          'スマホで名言サイトを開く',
          '今の気分に合う言葉を探す',
          'じっくりと言葉を味わう',
          '自分に当てはめて考える',
          '気に入った言葉をメモする'
        ]
      }
    ],
    15: [
      {
        id: 'fallback-wp-15-1',
        title: '軽い散歩でリフレッシュ',
        description: 'オフィス内や建物周辺を歩く',
        duration: 15,
        category: '行動的',
        steps: [
          'デスクから立ち上がる',
          '階段の上り下りを2-3回',
          '外の空気を吸いに出る',
          '遠くの景色を眺める',
          'ゆっくりと職場に戻る'
        ]
      },
      {
        id: 'fallback-wp-15-2',
        title: 'マインドフルネス瞑想',
        description: '今この瞬間に意識を向ける',
        duration: 15,
        category: '認知的',
        steps: [
          '静かな場所を見つける',
          '楽な姿勢で座る',
          '呼吸に意識を向ける',
          '雑念が浮かんでも呼吸に戻る',
          'ゆっくりと目を開ける'
        ]
      },
      {
        id: 'fallback-wp-15-3',
        title: '同僚とのティーブレイク',
        description: '気軽な会話でストレス解消',
        duration: 15,
        category: '行動的',
        steps: [
          '信頼できる同僚を誘う',
          '休憩スペースへ移動',
          '温かい飲み物を用意',
          '仕事以外の話題で会話',
          'お互いの話を聞き合う'
        ]
      },
      {
        id: 'fallback-wp-15-4',
        title: '軽い筋トレ',
        description: 'オフィスでできる簡単な運動',
        duration: 15,
        category: '行動的',
        steps: [
          '静かな場所を見つける',
          'スクワット10回を3セット',
          '腕立て伏せ5回を2セット',
          'プランク30秒を2回',
          '深呼吸で心拍数を整える'
        ]
      },
      {
        id: 'fallback-wp-15-5',
        title: 'お笑い動画で笑う',
        description: 'YouTubeでお気に入りのネタを見る',
        duration: 15,
        category: '認知的',
        steps: [
          'イヤホンを準備する',
          'YouTubeでお笑い動画を検索',
          '気に入ったネタを選ぶ',
          '思いっきり笑う',
          '笑顔のまま仕事に戻る'
        ]
      },
      {
        id: 'fallback-wp-15-6',
        title: '本格的な呼吸法',
        description: 'ストレス軽減の呼吸エクササイズ',
        duration: 15,
        category: '認知的',
        steps: [
          '静かな場所で楽な姿勢をとる',
          '腹式呼吸を5分間続ける',
          '4-7-8呼吸法を5回繰り返す',
          'ボディスキャン瞑想を5分',
          'ゆっくりと日常に戻る'
        ]
      }
    ],
    30: [
      {
        id: 'fallback-wp-30-1',
        title: '本格的なウォーキング',
        description: '外の空気を吸いながら歩く',
        duration: 30,
        category: '行動的',
        steps: [
          '歩きやすい服装に着替える',
          '近くの公園や遊歩道へ',
          '自分のペースで歩く',
          '自然や景色を楽しむ',
          '深呼吸しながら職場へ戻る'
        ]
      },
      {
        id: 'fallback-wp-30-2',
        title: 'カフェでリラックス',
        description: '少し高めのカフェで贅沢な時間',
        duration: 30,
        category: '行動的',
        steps: [
          '評判の良いカフェを調べる',
          'ゆっくり歩いてカフェへ向かう',
          '好きな飲み物を注文',
          '窓際の席でぼんやりする',
          'リフレッシュして職場へ戻る'
        ]
      },
      {
        id: 'fallback-wp-30-3',
        title: '読書タイム',
        description: '気になっていた本を読む',
        duration: 30,
        category: '認知的',
        steps: [
          '静かな場所を見つける',
          '読みたい本やKindleを用意',
          '最初の章をじっくり読む',
          '気になった部分をメモ',
          '次回の続きを楽しみにする'
        ]
      },
      {
        id: 'fallback-wp-30-4',
        title: '英語学習',
        description: 'スキマ時間で語学力アップ',
        duration: 30,
        category: '認知的',
        steps: [
          '英語学習アプリを開く',
          '今日のレッスンを確認',
          '集中して練習問題を解く',
          '発音練習も忘れずに',
          '達成感を味わう'
        ]
      }
    ]
  },
  home: {
    5: [
      {
        id: 'fallback-hm-5-1',
        title: '温かいお茶でひと息',
        description: '好きな飲み物でリラックス',
        duration: 5,
        category: '行動的',
        steps: [
          'お気に入りの飲み物を用意',
          '静かな場所に座る',
          '香りを楽しむ',
          'ゆっくりと味わう',
          '心が落ち着くのを感じる'
        ]
      },
      {
        id: 'fallback-hm-5-2',
        title: 'ペットや植物との交流',
        description: '生き物との触れ合いで癒される',
        duration: 5,
        category: '行動的',
        steps: [
          'ペットに優しく話しかける',
          '撫でたり遊んだりする',
          '植物があれば水やりや手入れ',
          '成長や変化を観察',
          '命のぬくもりを感じる'
        ]
      },
      {
        id: 'fallback-hm-5-3',
        title: '好きな音楽を1曲',
        description: 'お気に入りの曲で気分転換',
        duration: 5,
        category: '認知的',
        steps: [
          '今の気分に合う曲を選ぶ',
          'ヘッドホンで聴く準備',
          '目を閉じて再生',
          '歌詞やメロディに集中',
          '曲の余韻を楽しむ'
        ]
      },
      {
        id: 'fallback-hm-5-4',
        title: 'アイスクリームを食べる',
        description: '好きな味で幸せな気分に',
        duration: 5,
        category: '行動的',
        steps: [
          '冷凍庫を開ける',
          '好きな味を選ぶ',
          'ゆっくりと最初の一口',
          '口の中で溶ける感覚を楽しむ',
          '幸せな気持ちになる'
        ]
      },
      {
        id: 'fallback-hm-5-5',
        title: '猫の画像を検索',
        description: 'かわいい猫に癒される',
        duration: 5,
        category: '認知的',
        steps: [
          'スマホやPCで画像検索',
          '「かわいい猫」で検索',
          'お気に入りの1枚を見つける',
          '表情をじっくり観察',
          '心が温かくなる'
        ]
      },
      {
        id: 'fallback-hm-5-6',
        title: 'お香をたく',
        description: '好きな香りでリラックス',
        duration: 5,
        category: '行動的',
        steps: [
          'お気に入りのお香を選ぶ',
          '安全な場所に香立てを置く',
          'ゆっくりと火をつける',
          '立ち上る煙を眺める',
          '香りに包まれる'
        ]
      },
      {
        id: 'fallback-hm-5-7',
        title: '布団に倒れ込む',
        description: 'ふかふかの感触を楽しむ',
        duration: 5,
        category: '行動的',
        steps: [
          '布団やベッドに向かう',
          '思い切って倒れ込む',
          'ふかふかの感触を感じる',
          '大の字になって伸びる',
          'しばらくぼーっとする'
        ]
      }
    ],
    15: [
      {
        id: 'fallback-hm-15-1',
        title: '紅茶をゆっくりいれる',
        description: '丁寧なティータイムで心を整える',
        duration: 15,
        category: '行動的',
        steps: [
          'お気に入りの茶葉を選ぶ',
          'お湯を適温に沸かす',
          'ティーポットを温める',
          'ゆっくりと茶葉を蒸らす',
          '香りを楽しみながら味わう'
        ]
      },
      {
        id: 'fallback-hm-15-2',
        title: '簡単な料理を作る',
        description: '野菜を刻んでストレス発散',
        duration: 15,
        category: '行動的',
        steps: [
          '冷蔵庫から野菜を取り出す',
          'まな板と包丁を準備',
          'リズミカルに野菜を刻む',
          '簡単なサラダや炒め物に',
          '作った料理を味わう'
        ]
      },
      {
        id: 'fallback-hm-15-3',
        title: 'お母さんに電話',
        description: '家族の声で安心感を得る',
        duration: 15,
        category: '行動的',
        steps: [
          '静かな場所を見つける',
          '電話番号を押す',
          '「元気？」と話しかける',
          '近況を報告し合う',
          '「また話そうね」と約束'
        ]
      },
      {
        id: 'fallback-hm-15-4',
        title: '本棚の整理',
        description: 'ジャンルごとに並べ直してすっきり',
        duration: 15,
        category: '行動的',
        steps: [
          '本棚の前に立つ',
          '本を全部出してみる',
          'ジャンルごとに分類',
          '読みたい順に並べ直す',
          '整った本棚を眺めて満足'
        ]
      }
    ],
    30: [
      {
        id: 'fallback-hm-30-1',
        title: '海外ドラマを観る',
        description: 'お気に入りのエピソードでリフレッシュ',
        duration: 30,
        category: '認知的',
        steps: [
          '快適な姿勢を作る',
          '好きなドラマを選ぶ',
          'お気に入りのエピソードを再生',
          '登場人物に感情移入',
          'エンディングまで楽しむ'
        ]
      },
      {
        id: 'fallback-hm-30-2',
        title: 'ゆっくりジョギング',
        description: '自分のペースで軽く走る',
        duration: 30,
        category: '行動的',
        steps: [
          '運動しやすい服装に着替える',
          '準備運動をする',
          'ゆっくりとしたペースで走り出す',
          '呼吸を整えながら進む',
          'クールダウンして帰宅'
        ]
      },
      {
        id: 'fallback-hm-30-3',
        title: '凝った料理に挑戦',
        description: '新しいレシピで気分転換',
        duration: 30,
        category: '行動的',
        steps: [
          'レシピサイトで料理を選ぶ',
          '材料を確認・準備',
          '手順通りに調理開始',
          '盛り付けにもこだわる',
          '完成品を写真に撮る'
        ]
      },
      {
        id: 'fallback-hm-30-4',
        title: '布団を干す',
        description: '太陽の香りでリフレッシュ',
        duration: 30,
        category: '行動的',
        steps: [
          '天気を確認する',
          '布団を運び出す',
          '日当たりの良い場所に干す',
          '枕も一緒に干す',
          'ふかふかになった布団を取り込む'
        ]
      }
    ]
  },
  outside: {
    5: [
      {
        id: 'fallback-out-5-1',
        title: '周囲の観察ゲーム',
        description: '五感を使って環境を観察',
        duration: 5,
        category: '認知的',
        steps: [
          '安全な場所で立ち止まる',
          '見えるものを5つ数える',
          '聞こえる音を4つ見つける',
          '触れるものを3つ感じる',
          '香りや味を2つ意識する'
        ]
      },
      {
        id: 'fallback-out-5-2',
        title: '公園のベンチで休憩',
        description: '自然の中でリラックス',
        duration: 5,
        category: '行動的',
        steps: [
          '近くのベンチを見つける',
          'ゆったりと座る',
          '空や木々を眺める',
          '鳥の声に耳を傾ける',
          '深呼吸を数回する'
        ]
      },
      {
        id: 'fallback-out-5-3',
        title: 'スマホで友人にメッセージ',
        description: '大切な人とつながる',
        duration: 5,
        category: '行動的',
        steps: [
          '連絡したい人を思い浮かべる',
          '簡単な挨拶メッセージを作成',
          '近況や感謝を伝える',
          '送信して返事を待つ',
          'つながりを感じる'
        ]
      },
      {
        id: 'fallback-out-5-4',
        title: '住宅街を歩く',
        description: 'いろいろな家を眺める',
        duration: 5,
        category: '行動的',
        steps: [
          '静かな住宅街へ向かう',
          'ゆっくりと歩き始める',
          '家々の外観を観察',
          '庭や玄関の工夫を見る',
          '自分の理想の家を想像'
        ]
      },
      {
        id: 'fallback-out-5-5',
        title: '釣りに行く妄想',
        description: '心の中で釣り体験',
        duration: 5,
        category: '認知的',
        steps: [
          '目を閉じて深呼吸',
          '静かな湖畔をイメージ',
          '竿を振る動作を想像',
          '魚がかかる感覚を思い描く',
          '大物を釣り上げた達成感'
        ]
      },
      {
        id: 'fallback-out-5-6',
        title: 'ショップウィンドウ観察',
        description: 'デパートや店舗の展示を楽しむ',
        duration: 5,
        category: '認知的',
        steps: [
          '近くの商店街やデパートへ',
          'ウィンドウディスプレイを眺める',
          '季節の商品をチェック',
          '色使いやレイアウトを楽しむ',
          '欲しいものを想像する'
        ]
      },
      {
        id: 'fallback-out-5-7',
        title: 'インスタグラムで癒し画像',
        description: '美しい写真で気分転換',
        duration: 5,
        category: '認知的',
        steps: [
          'インスタグラムを開く',
          '#癒し や #風景 で検索',
          '美しい写真を見つける',
          'お気に入りに保存',
          '心が穏やかになる'
        ]
      }
    ],
    15: [
      {
        id: 'fallback-out-15-1',
        title: 'カフェ巡り',
        description: '新しいカフェを探索',
        duration: 15,
        category: '行動的',
        steps: [
          '近くのカフェを検索',
          '行ったことない店を選ぶ',
          'ゆっくり歩いて向かう',
          '好きな飲み物を注文',
          '雰囲気を楽しみながら休憩'
        ]
      },
      {
        id: 'fallback-out-15-2',
        title: '雑誌を立ち読み',
        description: 'コンビニや書店でリフレッシュ',
        duration: 15,
        category: '認知的',
        steps: [
          '近くのコンビニか書店へ',
          '興味のある雑誌コーナーへ',
          '表紙を見て選ぶ',
          '気になる記事をチェック',
          '新しい情報を得て満足'
        ]
      },
      {
        id: 'fallback-out-15-3',
        title: '虫取り妄想',
        description: '子供時代を思い出す',
        duration: 15,
        category: '認知的',
        steps: [
          '公園や緑の多い場所へ',
          'ベンチに座って目を閉じる',
          '夏の虫取りを思い出す',
          'カブトムシやセミを探す想像',
          '童心に返って楽しむ'
        ]
      },
      {
        id: 'fallback-out-15-4',
        title: '街の音楽を聴く',
        description: 'ストリートミュージシャンを楽しむ',
        duration: 15,
        category: '行動的',
        steps: [
          '駅前や公園を歩く',
          '演奏している人を見つける',
          '少し離れた場所で聴く',
          '音楽に身を委ねる',
          '気持ちよければ拍手を送る'
        ]
      }
    ],
    30: [
      {
        id: 'fallback-out-30-1',
        title: 'デパート散策',
        description: 'フロアをゆっくり巡る',
        duration: 30,
        category: '行動的',
        steps: [
          '近くのデパートへ向かう',
          '最上階から順に降りる',
          '各フロアの特徴を楽しむ',
          'デパ地下で試食を楽しむ',
          '疲れたら休憩スペースで一休み'
        ]
      },
      {
        id: 'fallback-out-30-2',
        title: '銭湯でリラックス',
        description: '大きなお風呂で疲れを取る',
        duration: 30,
        category: '行動的',
        steps: [
          '近所の銭湯を調べる',
          'タオルと着替えを準備',
          'ゆっくりと湯船につかる',
          'サウナがあれば利用',
          'さっぱりして帰路につく'
        ]
      },
      {
        id: 'fallback-out-30-3',
        title: 'マッサージ体験',
        description: 'プロの手で身体をほぐす',
        duration: 30,
        category: '行動的',
        steps: [
          '近くのマッサージ店を検索',
          '30分コースを選択',
          'リラックスして施術を受ける',
          '凝っている部分を伝える',
          'すっきりした身体を実感'
        ]
      },
      {
        id: 'fallback-out-30-4',
        title: '図書館で過ごす',
        description: '静かな空間で心を整える',
        duration: 30,
        category: '認知的',
        steps: [
          '最寄りの図書館へ向かう',
          '興味のあるコーナーを探索',
          '気になる本を数冊選ぶ',
          '静かな席でゆっくり読む',
          '心が落ち着くのを感じる'
        ]
      }
    ]
  }
};

// 就活・転職活動者向けの追加提案
const jobHuntingFallback = {
  job_hunting: {
    5: [
      {
        id: 'fallback-jh-5-1',
        title: '面接前の呼吸法',
        description: '緊張を和らげる特別な呼吸',
        duration: 5,
        category: '認知的',
        steps: [
          '静かな場所で立つか座る',
          '鼻から4秒吸って腹を膨らませる',
          '4秒息を止める',
          '口から4秒吐いて腹をへこませる',
          '「大丈夫」と心の中で唱える'
        ]
      },
      {
        id: 'fallback-jh-5-2',
        title: 'ポジティブアファメーション',
        description: '自己肯定感を高める言葉かけ',
        duration: 5,
        category: '認知的',
        steps: [
          '鏡の前に立つか、スマホのカメラを見る',
          '「私には価値がある」と3回言う',
          '「私は成長している」と3回言う',
          '「私は最善を尽くしている」と3回言う',
          '自分に微笑みかける'
        ]
      },
      {
        id: 'fallback-jh-5-3',
        title: '小さな達成リスト',
        description: '今日できたことを認める',
        duration: 5,
        category: '認知的',
        steps: [
          'メモアプリを開く',
          '今日できたことを1つ書く（起床でもOK）',
          '2つ目を追加（朝食を食べた等）',
          '3つ目を追加（履歴書を1行書いた等）',
          '自分を褒める'
        ]
      },
      {
        id: 'fallback-jh-5-4',
        title: 'パワーポーズ',
        description: '自信を高める身体の使い方',
        duration: 5,
        category: '行動的',
        steps: [
          '立ち上がって肩幅に足を開く',
          '両手を腰に当てる',
          '胸を張り、顎を上げる',
          'この姿勢を2分間キープ',
          '自信が湧いてくるのを感じる'
        ]
      },
      {
        id: 'fallback-jh-5-5',
        title: '成功イメージング',
        description: '面接成功の場面を想像',
        duration: 5,
        category: '認知的',
        steps: [
          '目を閉じて深呼吸',
          '面接室に入る自分を想像',
          '笑顔で質問に答える自分',
          '面接官が頷く様子を想像',
          '「ありがとうございました」と退室'
        ]
      },
      {
        id: 'fallback-jh-5-6',
        title: '緊張ほぐしストレッチ',
        description: '肩と首の緊張を解放',
        duration: 5,
        category: '行動的',
        steps: [
          '両肩を上げて3秒キープ',
          'ストンと力を抜いて下ろす',
          '首を左右にゆっくり回す',
          '肩甲骨を寄せて離す',
          '全身の力を抜いてリラックス'
        ]
      },
      {
        id: 'fallback-jh-5-7',
        title: '励ましの言葉を見る',
        description: '応援メッセージで勇気づけ',
        duration: 5,
        category: '認知的',
        steps: [
          'スマホのメモを開く',
          '家族や友人からの応援を読む',
          '過去の成功体験を思い出す',
          '「頑張ってきた」と認める',
          '笑顔を作って前を向く'
        ]
      }
    ],
    15: [
      {
        id: 'fallback-jh-15-1',
        title: '企業研究の整理',
        description: '志望動機を再確認',
        duration: 15,
        category: '認知的',
        steps: [
          'ノートかメモアプリを開く',
          '志望企業の魅力を3つ書く',
          '自分の強みとの接点を整理',
          'なぜその企業なのかを言語化',
          '声に出して練習する'
        ]
      },
      {
        id: 'fallback-jh-15-2',
        title: '模擬面接練習',
        description: '一人でできる面接対策',
        duration: 15,
        category: '行動的',
        steps: [
          '鏡の前に座る',
          '自己紹介を1分で話す',
          '志望動機を2分で説明',
          '想定質問に答える練習',
          '笑顔と姿勢をチェック'
        ]
      },
      {
        id: 'fallback-jh-15-3',
        title: '業界ニュースチェック',
        description: '最新情報で知識アップデート',
        duration: 15,
        category: '認知的',
        steps: [
          '志望業界のニュースサイトへ',
          '直近1週間のトピックを確認',
          '重要なポイントをメモ',
          '面接での話題として整理',
          '自分の意見も考える'
        ]
      },
      {
        id: 'fallback-jh-15-4',
        title: 'ES見直しタイム',
        description: '提出書類の最終チェック',
        duration: 15,
        category: '認知的',
        steps: [
          '提出予定のESを開く',
          '誤字脱字をチェック',
          '論理の流れを確認',
          '具体例が入っているか確認',
          '声に出して読んでみる'
        ]
      }
    ],
    30: [
      {
        id: 'fallback-jh-30-1',
        title: '転職エージェントと作戦会議',
        description: '電話で相談・アドバイス',
        duration: 30,
        category: '行動的',
        steps: [
          'エージェントに連絡',
          '現在の活動状況を報告',
          '不安な点を相談',
          'アドバイスをメモする',
          '次のアクションを決める'
        ]
      },
      {
        id: 'fallback-jh-30-2',
        title: 'ポートフォリオ整理',
        description: '実績・スキルの見える化',
        duration: 30,
        category: '行動的',
        steps: [
          '過去の成果物を集める',
          'カテゴリー別に整理',
          '各プロジェクトの説明を追加',
          '見せ方を工夫する',
          'PDFやWebにまとめる'
        ]
      },
      {
        id: 'fallback-jh-30-3',
        title: '同じ境遇の仲間と話す',
        description: 'オンラインコミュニティで交流',
        duration: 30,
        category: '行動的',
        steps: [
          '転職・就活コミュニティにアクセス',
          '近況を投稿してみる',
          '他の人の投稿にコメント',
          '励まし合いの言葉を交換',
          '新しい視点を得る'
        ]
      },
      {
        id: 'fallback-jh-30-4',
        title: '自己分析ワーク',
        description: '強み・価値観の棚卸し',
        duration: 30,
        category: '認知的',
        steps: [
          'ノートとペンを用意',
          '過去の成功体験を5つ書く',
          'それぞれの共通点を探す',
          '自分の強みを言語化',
          '将来のビジョンを描く'
        ]
      }
    ]
  }
};

function getFallbackSuggestions(situation, duration, ageGroup) {
  console.log('[FALLBACK] Generating suggestions for:', { situation, duration, ageGroup });
  
  // 就活・転職活動者向けの特別対応
  if (ageGroup === 'job_hunting' || situation === 'job_hunting') {
    const suggestions = jobHuntingFallback.job_hunting[duration] || 
                      jobHuntingFallback.job_hunting[5];
    console.log('[FALLBACK] Job hunting suggestions available:', suggestions.length);
    return shuffleArrayWithTimestamp(suggestions).slice(0, 3);
  }
  
  // 通常の提案
  const situationData = fallbackSuggestions[situation] || fallbackSuggestions.workplace;
  const durationData = situationData[duration] || situationData[5];
  
  console.log('[FALLBACK] Available suggestions:', durationData.length);
  
  // 毎回異なる3つをランダムに返す
  const shuffled = shuffleArrayWithTimestamp(durationData);
  console.log('[FALLBACK] Shuffled suggestions, returning 3 of', shuffled.length);
  
  return shuffled.slice(0, 3);
}

// 配列をシャッフルする関数
function shuffleArray(array) {
  const shuffled = [...array];
  for (let i = shuffled.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
  }
  return shuffled;
}

// タイムスタンプベースの強化されたシャッフル関数
function shuffleArrayWithTimestamp(array) {
  if (!array || array.length === 0) return array;
  
  const shuffled = [...array];
  const timestamp = new Date().getTime();
  const microseconds = performance.now(); // より高精度なタイムスタンプ
  
  // フィッシャー・イェーツシャッフル
  for (let i = shuffled.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
  }
  
  // 追加のランダム性を保証するため、タイムスタンプを使用
  const seed = timestamp + microseconds;
  return shuffled.sort(() => {
    const random = Math.sin(seed + Math.random() * 1000) * 10000;
    return (random % 1) - 0.5;
  });
}

module.exports = { getFallbackSuggestions };