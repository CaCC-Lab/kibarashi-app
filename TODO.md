# TODO.md - 5分気晴らしアプリ開発タスクリスト

## 🎯 Phase 1 (MVP) - 超シンプル版

### 🔴 最優先タスク（プロジェクト基盤）

- [x] **プロジェクト初期セットアップ**
  - [x] Gitリポジトリの初期化
  - [x] .gitignoreファイルの作成
  - [x] プロジェクトのディレクトリ構造作成（frontend/, backend/, infrastructure/, docs/）
  - [x] README.mdの作成（基本的なプロジェクト説明）

- [x] **技術スタック定義ファイルの作成**
  - [x] technologystack.mdの作成（使用技術・バージョン固定）
  - [x] directorystructure.mdの作成（ディレクトリ構成ルール）

- [x] **開発環境構築**
  - [x] Docker設定ファイルの作成（docker-compose.yml）
  - [x] 環境変数管理の設定（.env.example）
  - [x] VSCode推奨設定（.vscode/settings.json）

### 🟡 高優先度タスク（フロントエンド基盤）

- [x] **Reactアプリケーション初期化**
  - [x] Vite + React + TypeScript の初期設定
  - [x] 基本的なApp.tsxの作成
  - [x] Tailwind CSS の設定
  - [x] ESLint/Prettier の設定

- [x] **PWA基本設定**
  - [x] manifest.jsonの作成
  - [x] Service Workerの基本実装（vite-plugin-pwa）
  - [x] アイコンセットの準備（生成ツール作成）
  - [x] オフライン対応の基礎実装

- [x] **基本UIコンポーネント作成**
  - [x] レイアウトコンポーネント（Header, Main, Footer）
  - [x] 状況選択コンポーネント（職場・家・外出）
  - [x] 時間選択コンポーネント（5分・15分・30分）
  - [x] 提案表示コンポーネント（3つの提案カード）
  - [x] ローディング/エラー表示コンポーネント

### 🟢 中優先度タスク（バックエンド基盤）

- [x] **Node.js/Expressサーバー初期化**
  - [x] TypeScript設定
  - [x] 基本的なミドルウェア設定（CORS, helmet, compression等）
  - [x] エラーハンドリングミドルウェア
  - [x] ヘルスチェックエンドポイント

- [x] **API実装（Phase 1）**
  - [x] GET /api/v1/suggestions エンドポイント
  - [x] 静的な提案データの準備（Gemini API統合前）
  - [x] レスポンス形式の実装（TypeScript型定義）

- [x] **静的提案データの準備**
  - [x] 開発仕様書の気晴らしリストをJSON化
  - [x] カテゴリ分類（認知的/行動的）
  - [x] 状況・時間に応じたフィルタリングロジック

- [x] **気晴らし実行機能**
  - [x] タイマー機能（開始、一時停止、リセット）
  - [x] 進行状況バー
  - [x] ガイドテキスト表示
  - [x] 完了メッセージ

- [x] **UI改善**
  - [x] 設定ボタンに「今後実装予定」メッセージを追加
  - [x] ダークモード対応
  - [x] アニメーション追加
  - [x] アクセシビリティ向上

- [x] **Google Cloud設定**
  - [x] GCPプロジェクトの作成
  - [x] 必要なAPIの有効化（Gemini API, Text-to-Speech API）
  - [x] 認証情報の設定
  - [x] 環境変数への組み込み

### 🔵 通常優先度タスク（機能実装）

- [x] **Gemini API統合**
  - [x] API クライアントの実装
  - [x] プロンプトエンジニアリング（気晴らし提案生成）
  - [x] レート制限とエラーハンドリング
  - [x] フォールバック提案データの準備

- [x] **Google Cloud TTS統合**
  - [x] TTS APIクライアントの実装
  - [x] 音声生成エンドポイント（POST /api/v1/tts）
  - [x] 音声ファイルのキャッシュ戦略
  - [x] フロントエンドでの音声再生実装
  - [x] エラーハンドリング改善（TTS無効時対応）


### ⚪ 低優先度タスク（品質向上）

- [ ] **テスト実装**
  - [ ] フロントエンドユニットテスト設定（Jest, React Testing Library）
  - [ ] バックエンドユニットテスト設定
  - [ ] 主要コンポーネントのテスト作成
  - [ ] API エンドポイントのテスト作成

- [ ] **UI/UXブラッシュアップ**
  - [ ] アニメーション追加（控えめに）
  - [ ] レスポンシブデザインの調整
  - [ ] アクセシビリティ対応（キーボードナビゲーション）
  - [ ] ダークモード対応（オプション）

- [ ] **パフォーマンス最適化**
  - [ ] React.lazy()による動的インポート
  - [ ] 画像最適化
  - [ ] バンドルサイズの削減

### 📝 ドキュメント作成

- [ ] **技術ドキュメント**
  - [ ] API仕様書（OpenAPI/Swagger）
  - [ ] アーキテクチャ図
  - [ ] デプロイメント手順書

- [ ] **運用ドキュメント**
  - [ ] 環境構築手順
  - [ ] トラブルシューティングガイド
  - [ ] 監視・ログ設定

### 🚀 デプロイメント準備

- [ ] **CI/CD設定**
  - [ ] GitHub Actions ワークフロー作成
  - [ ] 自動テスト実行
  - [ ] ビルド・デプロイ自動化

- [ ] **本番環境準備**
  - [ ] Firebase Hosting設定
  - [ ] Cloud Functions デプロイ設定
  - [ ] ドメイン設定（必要に応じて）
  - [ ] SSL証明書設定

## 📊 Phase 1 完了基準

### 機能要件
- ✅ 状況×時間の選択で3つの提案が表示される
- ✅ 音声ガイドが再生できる（オプション）
- ✅ オフラインでも基本機能が動作する
- ✅ PWAとしてインストール可能

### 非機能要件
- ✅ 3タップ以内で提案表示
- ✅ 読み込み時間3秒以内
- ✅ モバイルファーストのレスポンシブデザイン
- ✅ エラー時のフォールバック動作

### 品質基準
- ✅ 主要機能のテストカバレッジ70%以上
- ✅ Lighthouse スコア 90以上
- ✅ アクセシビリティ基準の遵守

## 🔄 作業の進め方

1. **最優先タスク**から順に着手
2. 各タスク完了時に[x]でチェック
3. 予期しない課題が発生した場合は、このファイルに追記
4. Phase 1完了後、Phase 2のタスクリストを別セクションに追加

## ⚠️ 注意事項

- **シンプルさを最優先** - 機能追加の誘惑に負けない
- **音声はオプション** - 音声なしでも完全に使えるUI
- **リスク認識** - 開発仕様書のリスク分析を常に意識
- **段階的実装** - Phase 1の範囲を超えない

---

最終更新: 2025/06/10
次回レビュー予定: Phase 1 MVP完成時

## 📈 進捗状況

### Phase 1 MVP
- プロジェクト基盤: ✅ 100% 完了
- フロントエンド基盤: ✅ 100% 完了
- バックエンド基盤: ✅ 100% 完了
- 基本機能実装: ✅ 100% 完了（静的データ版）
- Google Cloud統合: ✅ 100% 完了
- UI/UX改善: ✅ 100% 完了
- エラーハンドリング: ✅ 100% 完了
- テスト実装: ⏳ 0% 未着手
- パフォーマンス最適化: ⏳ 0% 未着手